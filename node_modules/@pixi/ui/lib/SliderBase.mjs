import { Container } from '@pixi/display';
import { Sprite } from '@pixi/sprite';
import { Text } from '@pixi/text';
import { removeHitBox } from './utils/helpers/hitbox.mjs';
import { getView } from './utils/helpers/view.mjs';
import { ProgressBar } from './ProgressBar.mjs';

class SliderBase extends ProgressBar {
  constructor(options) {
    super({
      bg: options.bg,
      fill: options.fill ?? options.bg,
      fillOffset: options.fillOffset
    });
    this.dragging = 0;
    /** Minimal value. */
    this.min = 0;
    /** Maximal value. */
    this.max = 100;
    if (options.slider1) {
      this.slider1 = this.createSlider(options.slider1);
      if (options.showValue) {
        this.value1Text = new Text("", options.valueTextStyle || { fill: 16777215 });
        this.value1Text.anchor.set(0.5);
        this.addChild(this.value1Text);
      }
    }
    if (options.slider2) {
      this.slider2 = this.createSlider(options.slider2);
      if (options.showValue) {
        this.value2Text = new Text("", options.valueTextStyle || { fill: 16777215 });
        this.value2Text.anchor.set(0.5);
        this.addChild(this.value2Text);
      }
    }
    this.min = options.min ?? 0;
    this.max = options.max ?? 100;
    this.activate();
  }
  activate() {
    this.bg.interactive = true;
    this.bg.on("pointerdown", this.startUpdate, this).on("globalpointermove", this.update, this).on("pointerup", this.endUpdate, this).on("pointerupoutside", this.endUpdate, this);
    if (this.slider1) {
      this.slider1.interactive = true;
      this.slider1.on("pointerdown", this.startUpdate, this).on("globalpointermove", this.update, this).on("pointerup", this.endUpdate, this).on("pointerupoutside", this.endUpdate, this);
    }
    if (this.slider2) {
      this.slider2.interactive = true;
      this.slider2.on("pointerdown", this.startUpdate, this).on("globalpointermove", this.update, this).on("pointerup", this.endUpdate, this).on("pointerupoutside", this.endUpdate, this);
    }
    removeHitBox(this.fill, this.value1Text, this.value2Text);
  }
  createSlider(sliderData) {
    const slider = getView(sliderData);
    slider.x = slider.width / 2;
    const container = new Container();
    container.addChild(slider);
    if (slider instanceof Sprite) {
      slider.anchor.set(0.5);
    }
    container.y = this.bg.height / 2;
    this.addChild(container);
    return container;
  }
  startUpdate(event) {
    this.dragging = 1;
    this.update(event);
  }
  endUpdate() {
    if (!this.dragging)
      return;
    this.dragging = 0;
  }
  update(_event) {
  }
}

export { SliderBase };
//# sourceMappingURL=SliderBase.mjs.map
