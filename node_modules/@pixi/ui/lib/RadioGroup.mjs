import { Container } from '@pixi/display';
import { Graphics } from '@pixi/graphics';
import { Sprite } from '@pixi/sprite';
import { Signal } from 'typed-signals';
import { CheckBox } from './CheckBox.mjs';
import { Layout } from './Layout.mjs';

class RadioGroup extends Container {
  constructor(options) {
    super();
    this.items = [];
    this.options = options;
    this.value = options.items[options.selectedItem];
    this.selected = options.selectedItem;
    this.innerView = new Layout({
      type: options.type,
      elementsMargin: options.elementsMargin
    });
    options.items.forEach((item, id) => {
      const unchecked = this.getView(options.style.bg);
      const checked = this.getView(options.style.checked);
      const checkBox = new CheckBox({
        text: item,
        checked: options.selectedItem === id,
        style: {
          unchecked,
          checked,
          text: options.style.textStyle
        }
      });
      this.innerView.addChild(checkBox);
      checkBox.onChange.connect(() => this.selectItem(id));
      this.items.push(checkBox);
      this.innerView.addChild(checkBox);
    });
    this.onChange = new Signal();
  }
  getView(view) {
    if (typeof view === "string") {
      return Sprite.from(view);
    }
    return this.getGraphics(view);
  }
  getGraphics({ color, fillColor, width, height, radius, padding }) {
    const graphics = new Graphics().beginFill(color);
    const isCircle = width === height && radius >= width / 2;
    if (isCircle) {
      graphics.drawCircle(width / 2, width / 2, width / 2);
    } else {
      graphics.drawRoundedRect(0, 0, width, height, radius);
    }
    if (fillColor !== void 0) {
      graphics.beginFill(fillColor);
      const center = width / 2;
      if (isCircle) {
        graphics.drawCircle(center, center, center - padding);
      } else {
        graphics.drawRoundedRect(padding, padding, width - padding * 2, height - padding * 2, radius);
      }
    }
    return graphics;
  }
  /**
   * Select item by ID.
   * @param id
   */
  selectItem(id) {
    this.items.forEach((item, key) => {
      item.forceCheck(key === id);
    });
    this.value = this.options.items[id];
    if (this.selected !== id) {
      this.onChange.emit(id, this.value);
    }
    this.selected = id;
  }
}

export { RadioGroup };
//# sourceMappingURL=RadioGroup.mjs.map
