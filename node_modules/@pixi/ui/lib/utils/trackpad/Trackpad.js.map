{"version":3,"file":"Trackpad.js","sources":["../../../src/utils/trackpad/Trackpad.ts"],"sourcesContent":["import { Point, Rectangle } from '@pixi/core';\nimport { ConstrainEase, SlidingNumber } from './SlidingNumber';\n\ninterface TrackpadOptions\n{\n    /** override the easing function when constraining */\n    xEase?: ConstrainEase;\n    yEase?: ConstrainEase;\n\n    maxSpeed?: number\n    constrain?: boolean\n}\n\n/** A track pad class that lets you scroll both in al directions. Its up to you to hook up the events. */\nexport class Trackpad\n{\n    public xAxis: SlidingNumber;\n    public yAxis: SlidingNumber;\n\n    private _isDown: boolean;\n    private _globalPosition: Point;\n    private _frame: Rectangle;\n    private _bounds: Rectangle;\n    private _dirty: boolean;\n\n    constructor(options: TrackpadOptions)\n    {\n        this.xAxis = new SlidingNumber({\n            ease: options.xEase,\n            maxSpeed: options.maxSpeed,\n            constrain: options.constrain,\n        });\n\n        this.yAxis = new SlidingNumber({\n            ease: options.yEase,\n            maxSpeed: options.maxSpeed,\n            constrain: options.constrain,\n        });\n\n        this._frame = new Rectangle();\n\n        this._bounds = new Rectangle();\n        this._globalPosition = new Point();\n    }\n\n    public pointerDown(pos: Point): void\n    {\n        this.xAxis.grab(pos.x);\n        this.yAxis.grab(pos.y);\n        this._isDown = true;\n    }\n\n    public pointerUp(): void\n    {\n        this._isDown = false;\n    }\n\n    public pointerMove(pos: Point): void\n    {\n        this._globalPosition = pos;\n    }\n\n    public update(): void\n    {\n        if (this._dirty)\n        {\n            this._dirty = false;\n\n            this.xAxis.min = this._bounds.left;\n            this.xAxis.min = this._bounds.right - this._frame.width;\n\n            this.xAxis.min = this._bounds.top;\n            this.xAxis.min = this._bounds.bottom - this._frame.height;\n        }\n\n        if (this._isDown)\n        {\n            this.xAxis.hold(this._globalPosition.x);\n            this.yAxis.hold(this._globalPosition.y);\n        }\n        else\n        {\n            this.xAxis.slide();\n            this.yAxis.slide();\n        }\n    }\n\n    public resize(w: number, h: number): void\n    {\n        this._frame.x = 0;\n        this._frame.width = w;\n\n        this._frame.y = 0;\n        this._frame.height = h;\n\n        this._dirty = true;\n    }\n\n    public setBounds(minX: number, maxX: number, minY: number, maxY: number): void\n    {\n        this._bounds.x = minX;\n        this._bounds.width = maxX - minX;\n        this._bounds.y = minY;\n        this._bounds.height = maxY - minY;\n\n        this._dirty = true;\n    }\n\n    get x(): number\n    {\n        return this.xAxis.value;\n    }\n\n    get y(): number\n    {\n        return this.yAxis.value;\n    }\n}\n"],"names":["SlidingNumber","Rectangle","Point"],"mappings":"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"}